# 파일정보

리눅스에서 파일의 목록 또는 정보를 보고 싶다면 ls 명령어를  이용한다.


~~~
# ls -l sample.txt   		→ 아래의 정보를 보여준다. 
# ls /etc/systemd    		→ /etc/systemd 디렉터리의 목록
# ls -a				 		→ 현재 디렉터리의 목록(숨김 파일 포함)
# ls -l				 		→ 현재 디렉터리의 목록을 자세히 보여줌(영문자 엘)
# ls *.conf			 		→ 확장자가 conf인 목록을 보여줌
# ls -l /etc/systemd/b*		→ /etc/systemd 딝터리에 있느 ㄴ목록 중 앞 글자가 'b'인 것의 목록을 자세히 보여줌
~~~
## 파일의 상세 정보

`ls -l` 을 이용하면 파일의 상세 정보를 볼수 있으며 다음과 같다.

~~~
-rwxr--r-- 1 root root 0 7월 15 16:11 sample.txt
~~~

<table>
    <tr>
    	<td>-</td>
        <td>rwxr--r--</td>
        <td>1</td>
        <td>root</td>
        <td>root</td>
        <td>0</td>
        <td>7월 15 16:11</td>
        <td>sample.txt</td>
    </tr>
</table> 

<table>
    <tr>
    	<th>-</th>
        <td>파일유형</td>
    </tr>
    <tr>
    	<th>rwxr--r--</th>
        <td>권한</td>
    </tr>
    <tr>
    	<th>1</th>
        <td>링크 수</td>
    </tr>
    <tr>
    	<th>root</th>
        <td>파일 소유자 이름</td>
    </tr>
    <tr>
    	<th>root</th>
        <td>파일 소유그룹 이름</td>
    </tr>
    <tr>
    	<th>0</th>
        <td>파일크기(Byte)</td>
    </tr>
    <tr>
    	<th>7월 15 16:11</th>
        <td>마지막 변경 날짜/시간</td>
    </tr>
    <tr>
    	<th>sample.txt</th>
        <td>파일이름</td>
    </tr>
</table>



## 파일 유형

파일 유형은 아래의 표처럼 총 5가지이다.

<table>
    <tr>
    	<th>d</th>
        <td>디렉터리</td>
    </tr>
    <tr>
    	<th>-</th>
        <td>파일</td>
    </tr>
    <tr>
    	<th>b</th>
        <td>블록 디바이스(보통 마운트된 디바이스를 가리킨다.)</td>
    </tr>
    <tr>
    	<th>c</th>
        <td>문자 디바이스</td>
    </tr>
    <tr>
    	<th>l</th>
        <td>링크</td>
    </tr>
</table>



## 파일 권한

파일 권한은 세 가지 권한을 설정할 수 있다.  r =  read,  w =write, x=execute 이다.  

또한 숫자로 변경할 수  있다. r=4, w=2, x=1로 변환할 수 있다.

파일 권한은 앞에서부터 3자리씩 분리할 수 있으며 3가지 종류가 나온다. 

`rwx rwx rwx`  첫 번째는  사용자에 대한 권한 , 두 번째는 그룹에 대한 권한, 세 번째는 일반 사용자에 대한 권한이다. 

파일  권한을 변경하는 명령어로는 `chmod`가 있다.  이 명령어는 사용자 또는 해당 파일의 소유자만이 실행할 수 있다.   

```
# chmod 777 sample.txt  → 모든 사용자가 읽고, 쓰고, 실행할 수 있는 파일이 된다.
```

`chmod`는  심볼릭 모드를 제공한다.  심볼릭 모드에서는 `+, -` 를 이용하여 권한을 추가하거나 삭제 할 수 있다.

```
# chmod u+x sample.txt   → 소유주에게 실행권한을 추가한다.
# chmod u+rx sample.txt  → 소유주에게 읽기권한과 실행권한을 추가한다.
# chmod g-w sample.txt   → 그룹권한 중 쓰기권한을 삭제한다.
# chmod o-rx sample.txt  → 일반사용자의 일기권한과 실행권한을 삭제한다.
```



## 파일 소유권

파일 소유권은 파일을 소유한 사용자와 그룹을 의미한다.  앞 부분은 사용자를 의미하며 뒤 부분이 그룹을 의미한다. 파일 소유권을 변경하는 명령어는 `chown`을 이용한다.

형식은 `chown 새로운사용자이름[.새로운그룹이름] 파일이름` 이다. 아래는 그 예이다.

```
# chown ubuntu sample.txt            → 소유자를 ubuntu로 변경한다.
# chown ubuntu.ubuntu sample.txt     → 소유자와 그룹을 ubuntu로 변경한다.
# chown .ubuntu sample.txt           → 소유자는 기본으로 적용한다. 그룹을 ubuntu로 변경한다. 
```



# 숨김파일 

리눅스에서는 별도의 숨김 파일 설정이 없다.  리눅스에서는 파일명 앞에 dot(.)를 넣으면 숨김파일 된다. 

```
.filename
```



# 링크 걸기 

리눅스에서는 윈도우의 바로가기 개념의 링크를 적용할 수 있다.  링크를 걸 때는 ln 명령어를 사용한다. 

리눅스에는 2종류의 링크를 제공한다.

첫 번째는 하드 링크와 두 번째는 심벌링크 이다.

파일 링크는 inode를 사용한다. inode란 리눅스/유닉스에서 사용하는 자료구조로써 파일이나 디렉터리의 여러가지 정보가 있다. 모든 파일이나 디렉터리는 각자 1개씩의 inode가 있으며, 각 inode에는 해당 파일의 소유권, 허가권, 파일 종류 등의 정보와 해당 파일의 실제 데이터가 어디에 있는지 위치(=주소)도 있다. 이러한 inode가 모여 잇는 공간이 inode 블록이며 일반적으로 전체 디스크의 1% 정도를 차지한다. Data 블록은 실제 데이터가 저장되어 있는 디스크 공간으로 전체 디스크의 대부분을 차지한다.



위 그림을 살펴보면  일단 원본 파일은 inode1을 가지고 있으며 inode1은 실제 하드디스크의 원본 파일 데이터를 가리키고 있다. 

원본파일을 가지고 하드 링크 파일을 만들면  하드 링크 파일은 inode1을 가리키고 있다.  원본 파일과 같은 inode를 공유하는 것이다.

원본 파일을 가지고 심볼릭 링크 파일을 만들면 inode2가 만들어 진다.  inode2는 원본 파일을 가리키고 원본 파일은 inode1을 가리키고 inode1는 원본 파일 데이터를 가리키고 있다. 

원본 파일을 삭제하면 어떻게 될까?

원본 파일이 삭제 되더라도 하드링크 파일이 inode1을 공유하므로 원본 파일의 데이터는 삭제되지 않는다. 

반면 심볼릭 링크 파일은 원본 파일을 가리키므로  원본 파일을 사라지면 원본 파일을 참조 할 수 없게 된다. 

inode를 확인하는 방법 [ ls -il ] 명령으로 확인할 수 있다.  

```
# ls -il       →  inode를 확인할수 있다. 제일 앞에 나오는 숫자가 inode이다. 
​~~~~~~~~~~~~~
2886096 -rw-r--r-- 1 root root .........
2886066 -rw-r--r-- 1 root root .........
```

링크의 생성은 ln 명령어를 사용하며 링크 만드는 방법은 다음과 같다.

```
# ln basefile hardlink        →  하드 링크를 만든다. 
# ln -s basefile softlink     →  소프트 링크를 만든다.
```







# 자동완성

터미널/TUI 환경에서 파일의 이름을 자동완성하는 기능을 제공한다.  파일의 이름 중  일부를 입력하고 `tab` 키를 입력하면 자동완성된다. 

만약 이름의 일부가 겹치는 파일이 있을 때는 자동완성이 되지 않는다. 대신 그 상태에서 `tab` 키를 두 번 연속으로 누르면 입력한 파일 이름의 일부와 일치하는  후보 파일들을 보여준다. 

만약 자동완성을 하고 싶다면 파일 이름의 일부가 다른 파일들과 겹치지 않는 단어까지 입력하고 `tab` 키를 적용하면 된다.



# 히스토리

히스토리는 터미널/TUI 환경에서 제공하는 기능으로 사용자가 매 순간 입력하는  명령어 라인을 기록한다. 

.bash_history

화살표 방향키`[↑][↓]`를 이용해서 이전 명령어  라인을 선택할 수 있다. 

히토리의 전체 목록을 보고 싶다면 아래와 같이 명령어를 입력한다.

```
# history
```

history는 명령어 라인들을 넘버링을 하며 왼쪽에 그 넘버를 보여준다. 

<img src="C:/Users/jskpu/OneDrive/%EB%AC%B8%EC%84%9C/network/images/history.PNG" align="left">

왼쪽의 숫자를 이용하여 해당 라인을 이전 히스토리로 선택할 수 있다. 

```
# history --
```



# 가상콘솔 

가상 콘솔이란 '가상의 모니터'를 말한다. 우분투는 총 7개의 가상 콘솔을 제공한다.  즉, 한 개의 컴퓨터에 일곱개의 모니터가 연결된 효과를 낸다.

7번은 GUI 환경을 제공하고 1 ~ 6번은 테스트 모드 환경을 제공한다. 

각각의 콘솔로 이동하는 단축키는 [ ctrl + alt + F1 ~ F7 ] 이다.

가상 콘솔을 명령어로 이동하려면  [chvt 가상콘솔 번호]를 사용한다. 

만약 2번 콘솔로 이동하고 싶다면  아래와 같이 명령을 사용한다. 

~~~
# chvt 2
~~~

